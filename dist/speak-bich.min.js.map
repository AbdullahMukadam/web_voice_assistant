{"version":3,"names":["root","factory","define","amd","module","exports","WebVoiceAssistant","self","this","extractPageContext","contextSize","content","document","title","push","metaDesc","querySelector","headings","querySelectorAll","forEach","h","textContent","trim","closest","tagName","paragraphs","p","length","formElements","el","placeholder","join","substring","SpeechRecognition","setup","language","onResult","window","webkitSpeechRecognition","recognition","lang","onresult","event","transcript","results","synthesis","speechSynthesis","speak","text","rate","Promise","resolve","utterance","SpeechSynthesisUtterance","onend","cancelSpeak","cancel","UIManager","constructor","config","startListening","stopListening","isListening","getCommand","speechConfig","assistant","messages","isCancelBtnVisible","ButtonBackGroundColour","svgColor","textColor","position","buttonSize","panelWidth","panelHeight","PanelBackgroundColor","MessagesBackgroundColor","headerTextName","injectStyles","createUI","bindEvents","getElementById","style","createElement","id","head","appendChild","container","className","button","innerHTML","chatPanel","messagesEl","statusEl","closeBtn","OverlaycloseBtn","recordBtn","cancelSpeechBtn","actionsContainer","chatPanelOverlay","commandtext","body","addMessage","addEventListener","display","requestAnimationFrame","opacity","transform","updateUI","toggleChat","updateCancelBtnStatus","isReady","console","log","then","status","sender","messageEl","scrollTop","scrollHeight","updateStatus","state","forceState","shouldOpen","undefined","classList","contains","toggle","setCommand","userCommand","add","setTimeout","remove","isProcessing","shouldShow","options","contextConfig","processcommand","ui","listening","_userCommand","context","aiConfig","geminiApiKey","__WEBVOICEASSISTANT_CONFIG__","model","maxTokens","temperature","alert","generateAiResponse","async","command","Context","response","fetch","method","headers","JSON","stringify","contents","role","parts","generationConfig","maxOutputTokens","ok","Error","data","json","candidates","error","start","stop","destroy","abort","onerror","value"],"sources":["dist/speak-bich.umd.js"],"mappings":"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","ignoreList":[]}