{"version":3,"names":["root","factory","define","amd","module","exports","WebVoiceAssistant","self","this","extractPageContext","contextSize","content","document","title","push","metaDesc","querySelector","headings","querySelectorAll","forEach","h","textContent","trim","closest","tagName","paragraphs","p","length","formElements","el","placeholder","join","substring","SpeechRecognition","setup","language","onResult","window","webkitSpeechRecognition","recognition","lang","onresult","event","transcript","results","synthesis","speechSynthesis","speak","text","rate","Promise","resolve","utterance","SpeechSynthesisUtterance","onend","cancelSpeak","cancel","UIManager","constructor","config","startListening","stopListening","isListening","getCommand","speechConfig","assistant","messages","isCancelBtnVisible","ButtonBackGroundColour","svgColor","textColor","position","buttonSize","panelWidth","panelHeight","PanelBackgroundColor","MessagesBackgroundColor","injectStyles","createUI","bindEvents","getElementById","style","createElement","id","head","appendChild","container","className","button","innerHTML","chatPanel","messagesEl","statusEl","closeBtn","recordBtn","cancelSpeechBtn","actionsContainer","chatPanelOverlay","commandtext","body","addMessage","addEventListener","display","requestAnimationFrame","opacity","transform","updateUI","toggleChat","updateCancelBtnStatus","isReady","console","log","then","status","sender","messageEl","scrollTop","scrollHeight","updateStatus","state","forceState","shouldOpen","undefined","classList","contains","toggle","setCommand","userCommand","add","setTimeout","isProcessing","shouldShow","options","contextConfig","processcommand","ui","listening","_userCommand","context","aiConfig","geminiApiKey","__WEBVOICEASSISTANT_CONFIG__","model","maxTokens","temperature","alert","generateAiResponse","async","command","Context","response","fetch","method","headers","JSON","stringify","contents","role","parts","generationConfig","maxOutputTokens","ok","Error","data","json","candidates","error","start","stop","value"],"sources":["dist/web-voice-assistant.umd.js"],"mappings":"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","ignoreList":[]}